# This workflow will run tests using node and then publish a package to GitHub Packages when a release is created
# For more information see: https://help.github.com/actions/language-and-framework-guides/publishing-nodejs-packages

name: Node.js Package

on:
    release:
        types: [created]

jobs:
    build-test-publish:
        runs-on: 'ubuntu-latest'

        steps:
            - uses: 'actions/checkout@v2'
              with:
                  ref: '${{ github.event.release.target_commitish }}'
            - name: 'Use Node.js 16'
              uses: 'actions/setup-node@v1'
            - run: 'yarn install'
            - run: 'yarn build'
            - run: 'npm publish --access public'
              env:
                  NODE_AUTH_TOKEN: '${{ secrets.npm_token }}'
